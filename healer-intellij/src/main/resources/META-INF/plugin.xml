<idea-plugin>
    <id>io.github.glaciousm.intellij</id>
    <name>Intent Healer</name>
    <vendor email="mmamouzellos@gmail.com" url="https://glaciousm.io">Intent Healer</vendor>

    <description><![CDATA[
        <p>Intent Healer plugin for IntelliJ IDEA - LLM-powered self-healing for Selenium tests.</p>

        <h3>Features</h3>
        <ul>
            <li><b>Heal History Viewer</b> - Browse and manage heal history</li>
            <li><b>Trust Dashboard</b> - Monitor trust levels and healing statistics</li>
            <li><b>Quick Actions</b> - Accept, reject, or blacklist heals from the IDE</li>
            <li><b>Locator Suggestions</b> - Get suggestions for more stable locators</li>
            <li><b>Intent Annotations</b> - Auto-complete for @Intent annotations</li>
        </ul>

        <h3>Getting Started</h3>
        <ol>
            <li>Configure Intent Healer in Settings > Tools > Intent Healer</li>
            <li>Open the Heal Dashboard from View > Tool Windows > Intent Healer</li>
            <li>Run your tests and view heal history in real-time</li>
        </ol>
    ]]></description>

    <depends>com.intellij.modules.platform</depends>
    <depends>com.intellij.modules.java</depends>
    <depends optional="true" config-file="gherkin.xml">gherkin</depends>

    <extensions defaultExtensionNs="com.intellij">
        <!-- Tool Window -->
        <toolWindow id="Intent Healer"
                    secondary="true"
                    anchor="right"
                    factoryClass="io.github.glaciousm.intellij.ui.HealerToolWindowFactory"/>

        <!-- Settings -->
        <applicationConfigurable
                parentId="tools"
                instance="io.github.glaciousm.intellij.settings.HealerSettingsConfigurable"
                id="io.github.glaciousm.intellij.settings"
                displayName="Intent Healer"/>

        <applicationService
                serviceImplementation="io.github.glaciousm.intellij.settings.HealerSettings"/>

        <!-- Project Service -->
        <projectService
                serviceImplementation="io.github.glaciousm.intellij.services.HealerProjectService"/>

        <!-- Notifications -->
        <notificationGroup id="Intent Healer Notifications"
                           displayType="BALLOON"
                           toolWindowId="Intent Healer"/>

        <!-- Line Markers for @Intent annotations -->
        <codeInsight.lineMarkerProvider
                language="JAVA"
                implementationClass="io.github.glaciousm.intellij.ui.IntentLineMarkerProvider"/>
    </extensions>

    <actions>
        <!-- Main menu actions -->
        <group id="IntentHealer.MainMenu" text="Intent Healer" popup="true">
            <add-to-group group-id="ToolsMenu" anchor="last"/>

            <action id="IntentHealer.OpenDashboard"
                    class="io.github.glaciousm.intellij.actions.OpenDashboardAction"
                    text="Open Dashboard"
                    description="Open the Intent Healer dashboard"/>

            <action id="IntentHealer.ViewHistory"
                    class="io.github.glaciousm.intellij.actions.ViewHistoryAction"
                    text="View Heal History"
                    description="View recent heal history"/>

            <separator/>

            <action id="IntentHealer.RefreshCache"
                    class="io.github.glaciousm.intellij.actions.RefreshCacheAction"
                    text="Refresh Cache"
                    description="Refresh heal cache from disk"/>

            <action id="IntentHealer.ClearCache"
                    class="io.github.glaciousm.intellij.actions.ClearCacheAction"
                    text="Clear Cache"
                    description="Clear all cached heals"/>
        </group>

        <!-- Editor popup actions -->
        <group id="IntentHealer.EditorPopup">
            <add-to-group group-id="EditorPopupMenu" anchor="last"/>

            <action id="IntentHealer.SuggestLocator"
                    class="io.github.glaciousm.intellij.actions.SuggestLocatorAction"
                    text="Suggest Stable Locator"
                    description="Suggest a more stable locator for this element"/>
        </group>
    </actions>
</idea-plugin>
